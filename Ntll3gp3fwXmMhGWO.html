<html><head><base href="https://wormgame.io/" /><title>ì§€ë ì´ì˜ ì‹í’ˆêµ° íƒí—˜</title>
<style>
  body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #f0f8ff;
    font-family: 'Arial', sans-serif;
  }
  #gameCanvas {
    display: none;
    transition: background-color 1s ease;
  }
  #mission {
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 28px;
    font-weight: bold;
    color: #4a4a4a;
    background-color: rgba(255, 255, 255, 0.7);
    padding: 15px;
    border-radius: 15px;
    font-family: 'Arial', sans-serif;
  }
  #startScreen, #gameOverScreen {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
  }
  #gameOverScreen {
    display: none;
  }
  #startButton, #restartButton {
    font-size: 24px;
    padding: 15px 30px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  #startButton:hover, #restartButton:hover {
    background-color: #45a049;
  }
  #rules {
    margin-top: 20px;
    font-size: 18px;
    color: #333;
    text-align: left;
  }
  #creator {
    font-size: 16px;
    color: #666;
    margin-top: 20px;
  }
  #source {
    font-size: 14px;
    color: #888;
    margin-top: 10px;
  }
  #nicknameInput {
    font-size: 20px;
    padding: 10px;
    margin-bottom: 20px;
    width: 80%;
    max-width: 300px;
    border: 2px solid #4CAF50;
    border-radius: 5px;
  }
  #finalScore {
    font-size: 36px;
    font-weight: bold;
    color: #4CAF50;
    margin: 20px 0;
  }
  #finalNickname {
    font-size: 24px;
    color: #333;
    margin-bottom: 20px;
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="mission"></div>
<div id="startScreen">
  <h1>ì§€ë ì´ì˜ ì‹í’ˆêµ° íƒí—˜</h1>
  <div id="creator">(ì¬ì—°ìŒ¤ì´ ë§Œë“¤ì—ˆìŒV)</div>
  <div id="source">ì¶œì²˜@gajae_ssam</div>
  <input type="text" id="nicknameInput" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="10">
  <button id="startButton">ê²Œì„ ì‹œì‘</button>
  <div id="rules">
    <h2>ê²Œì„ ê·œì¹™:</h2>
    <ul>
      <li>ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì—¬ ê·€ì—¬ìš´ ì§€ë ì´ë¥¼ ì¡°ì¢…í•˜ì„¸ìš”.</li>
      <li>í™”ë©´ì— í‘œì‹œë˜ëŠ” ë¯¸ì…˜ì— ë§ëŠ” ìŒì‹ì„ ë¨¹ìœ¼ì„¸ìš”.</li>
      <li>ë¯¸ì…˜ì— ë§ëŠ” ìŒì‹ì„ ë¨¹ìœ¼ë©´ ì§€ë ì´ê°€ ê¸¸ì–´ì§€ê³  ì ìˆ˜ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.</li>
      <li>ë¯¸ì…˜ê³¼ ë§ì§€ ì•ŠëŠ” ìŒì‹ì„ ë¨¹ìœ¼ë©´ ì§€ë ì´ê°€ ì§§ì•„ì§€ê³  ì ìˆ˜ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.</li>
      <li>ì§€ë ì´ì˜ ë¨¸ë¦¬, ëª¸í†µ, ê¼¬ë¦¬ ëª¨ë‘ ìŒì‹ê³¼ ë‹¿ìœ¼ë©´ ë¨¹ì€ ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.</li>
      <li>ë¯¸ì…˜ì€ 15ì´ˆë§ˆë‹¤ ë°”ë€Œë©°, ë°°ê²½ìƒ‰ë„ í•¨ê»˜ ë³€ê²½ë©ë‹ˆë‹¤.</li>
      <li>ì ìˆ˜ê°€ ë†’ì•„ì§ˆìˆ˜ë¡ í™”ë©´ì— ë” ë§ì€ ìŒì‹ì´ ë‚˜íƒ€ë‚˜ ë‚œì´ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.</li>
      <li>ê°€ëŠ¥í•œ ë†’ì€ ì ìˆ˜ë¥¼ ì–»ìœ¼ì„¸ìš”!</li>
    </ul>
  </div>
</div>
<div id="gameOverScreen">
  <h1>ê²Œì„ ì¢…ë£Œ</h1>
  <div id="finalNickname"></div>
  <div id="finalScore"></div>
  <button id="restartButton">ë‹¤ì‹œ ì‹œì‘</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const missionDisplay = document.getElementById('mission');
const startScreen = document.getElementById('startScreen');
const gameOverScreen = document.getElementById('gameOverScreen');
const startButton = document.getElementById('startButton');
const restartButton = document.getElementById('restartButton');
const nicknameInput = document.getElementById('nicknameInput');
const finalScoreDisplay = document.getElementById('finalScore');
const finalNicknameDisplay = document.getElementById('finalNickname');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let worm = {
  x: canvas.width / 2,
  y: canvas.height / 2,
  segments: [],
  maxLength: 20,
  speed: 5,
};

let food = [];
let currentMission = '';
let score = 0;
let gameStarted = false;
let nickname = '';

const missions = [
  { type: 'ê³¡ë¥˜', foods: ['ë°¥', 'ë¹µ', 'êµ­ìˆ˜', 'ì˜¥ìˆ˜ìˆ˜', 'ê°ì'], color: '#FFE4B5' },
  { type: 'ê³ ê¸°, ìƒì„ , ë‹¬ê±€, ì½©ë¥˜', foods: ['ë‘ë¶€', 'ì†Œê³ ê¸°', 'ë‹­ê³ ê¸°', 'ë‹¬ê±€', 'ì—°ì–´'], color: '#FFD700' },
  { type: 'ìš°ìœ , ìœ ì œí’ˆë¥˜', foods: ['ìš°ìœ ', 'ì¹˜ì¦ˆ', 'ìš”êµ¬ë¥´íŠ¸'], color: '#F0FFFF' },
  { type: 'ì±„ì†Œë¥˜ì™€ ê³¼ì¼ë¥˜', foods: ['ì‚¬ê³¼', 'ë°”ë‚˜ë‚˜', 'ë‹¹ê·¼', 'ë¸Œë¡œì½œë¦¬', 'í† ë§ˆí† '], color: '#98FB98' },
];

const foodEmojis = {
  'ë°¥': 'ğŸš', 'ë¹µ': 'ğŸ', 'êµ­ìˆ˜': 'ğŸœ', 'ì˜¥ìˆ˜ìˆ˜': 'ğŸŒ½', 'ê°ì': 'ğŸ¥”',
  'ë‘ë¶€': 'ğŸ§Š', 'ì†Œê³ ê¸°': 'ğŸ¥©', 'ë‹­ê³ ê¸°': 'ğŸ—', 'ë‹¬ê±€': 'ğŸ¥š', 'ì—°ì–´': 'ğŸ£',
  'ìš°ìœ ': 'ğŸ¥›', 'ì¹˜ì¦ˆ': 'ğŸ§€', 'ìš”êµ¬ë¥´íŠ¸': 'ğŸ¶',
  'ì‚¬ê³¼': 'ğŸ', 'ë°”ë‚˜ë‚˜': 'ğŸŒ', 'ë‹¹ê·¼': 'ğŸ¥•', 'ë¸Œë¡œì½œë¦¬': 'ğŸ¥¦', 'í† ë§ˆí† ': 'ğŸ…'
};

function generateFood() {
  const missionIndex = Math.floor(Math.random() * missions.length);
  const foodType = missions[missionIndex].foods;
  const foodItem = foodType[Math.floor(Math.random() * foodType.length)];
  let x, y;
  let overlap;
  const minDistance = 70;

  do {
    overlap = false;
    x = Math.random() * (canvas.width - 100) + 50;
    y = Math.random() * (canvas.height - 100) + 50;

    for (let f of food) {
      const dx = x - f.x;
      const dy = y - f.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      if (distance < minDistance) {
        overlap = true;
        break;
      }
    }
  } while (overlap);

  return { x, y, type: foodItem };
}

function setNewMission() {
  const newMission = missions[Math.floor(Math.random() * missions.length)];
  currentMission = newMission.type;
  missionDisplay.textContent = `ë¯¸ì…˜: ${currentMission} ë¨¹ê¸°`;
  canvas.style.backgroundColor = newMission.color;
}

function init() {
  worm = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    segments: [],
    maxLength: 20,
    speed: 5,
  };
  food = [];
  score = 0;
  setNewMission();
  updateFoodCount();
}

function updateFoodCount() {
  const baseCount = 60;
  const additionalCount = Math.floor(score / 150);
  const totalCount = baseCount + additionalCount;
  
  while (food.length < totalCount) {
    food.push(generateFood());
  }
}

function update(targetX, targetY) {
  let dx = targetX - worm.x;
  let dy = targetY - worm.y;
  let distance = Math.sqrt(dx * dx + dy * dy);

  if (distance > 1) {
    if (distance > worm.speed) {
      worm.x += (dx / distance) * worm.speed;
      worm.y += (dy / distance) * worm.speed;
    } else {
      worm.x = targetX;
      worm.y = targetY;
    }

    worm.segments.unshift({ x: worm.x, y: worm.y });

    if (worm.segments.length > worm.maxLength) {
      worm.segments.pop();
    }
  } else {
    if (worm.segments.length === 0 || 
        (worm.x !== worm.segments[0].x || worm.y !== worm.segments[0].y)) {
      worm.segments.unshift({ x: worm.x, y: worm.y });
      if (worm.segments.length > worm.maxLength) {
        worm.segments.pop();
      }
    }
  }

  checkFoodCollision();
  updateFoodCount();
}

function checkFoodCollision() {
  for (let i = food.length - 1; i >= 0; i--) {
    const f = food[i];
    let collision = false;

    for (let segment of worm.segments) {
      const dx = segment.x - f.x;
      const dy = segment.y - f.y;
      const distance = Math.sqrt(dx * dx + dy * dy);

      if (distance < 30) {
        collision = true;
        break;
      }
    }

    if (collision) {
      const foodMissionType = missions.find(m => m.foods.includes(f.type)).type;
      if (foodMissionType === currentMission) {
        worm.maxLength += 5;
        score += worm.maxLength;
      } else {
        worm.maxLength = Math.max(10, worm.maxLength - 3);
        score = Math.max(0, score - 50);
      }
      food.splice(i, 1);
      food.push(generateFood());
    }
  }
}

function drawWorm() {
  ctx.save();
  ctx.lineWidth = 36;
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';
  ctx.strokeStyle = 'rgba(255, 182, 193, 0.8)';
  
  ctx.beginPath();
  ctx.moveTo(worm.segments[0].x, worm.segments[0].y);
  for (let i = 1; i < worm.segments.length; i++) {
    ctx.lineTo(worm.segments[i].x, worm.segments[i].y);
  }
  ctx.stroke();

  const head = worm.segments[0];
  ctx.fillStyle = 'rgba(255, 182, 193, 0.8)';
  ctx.beginPath();
  ctx.arc(head.x, head.y, 18, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = 'black';
  ctx.beginPath();
  ctx.arc(head.x - 6, head.y - 3, 2, 0, Math.PI * 2);
  ctx.arc(head.x + 6, head.y - 3, 2, 0, Math.PI * 2);
  ctx.fill();

  ctx.strokeStyle = 'black';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.arc(head.x, head.y + 3, 8, 0.2 * Math.PI, 0.8 * Math.PI);
  ctx.stroke();

  ctx.restore();
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawWorm();

  ctx.font = '42px Arial';
  for (const f of food) {
    ctx.fillText(foodEmojis[f.type], f.x - 20, f.y + 16);
    ctx.font = '16px Arial';
    ctx.fillStyle = '#4a4a4a';
    ctx.fillText(f.type, f.x - 25, f.y + 40);
  }

  ctx.fillStyle = '#4a4a4a';
  ctx.font = 'bold 32px Arial';
  ctx.fillText(`${nickname}: ${score}ì `, canvas.width - 300, 50);
}

function gameLoop() {
  if (gameStarted) {
    update(mouseX, mouseY);
    draw();
  }
  requestAnimationFrame(gameLoop);
}

let mouseX = canvas.width / 2;
let mouseY = canvas.height / 2;

canvas.addEventListener('mousemove', (e) => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

function startGame() {
  gameStarted = true;
  startScreen.style.display = 'none';
  gameOverScreen.style.display = 'none';
  canvas.style.display = 'block';
  init();
  setInterval(setNewMission, 15000);
}

function endGame() {
  gameStarted = false;
  canvas.style.display = 'none';
  gameOverScreen.style.display = 'block';
  finalScoreDisplay.textContent = `ìµœì¢… ì ìˆ˜: ${score}ì `;
  finalNicknameDisplay.textContent = `ë‹‰ë„¤ì„: ${nickname}`;
}

startButton.addEventListener('click', () => {
  nickname = nicknameInput.value.trim();
  if (nickname === '') {
    alert('ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
    return;
  }
  startGame();
});

restartButton.addEventListener('click', () => {
  startGame();
});

// ê²Œì„ ì¢…ë£Œ ì¡°ê±´ (ì˜ˆ: 60ì´ˆ í›„ ê²Œì„ ì¢…ë£Œ)
setTimeout(() => {
  if (gameStarted) {
    endGame();
  }
}, 60000);

gameLoop();
</script>
</body></html>